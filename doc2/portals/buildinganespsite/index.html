
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!-- This page is automatically generated from XML data files. Please do not edit by hand. Instead, modify the source XML and regenerate. --><head><title>Oracc Documentation - Checking, correcting, and rebuilding an ESP website</title><link rel="stylesheet" type="text/css" media="print" href="../../css/print.css" /><link rel="stylesheet" type="text/css" media="handheld" href="../../css/handheld.css" /><link rel="stylesheet" type="text/css" media="screen,projection" href="../../css/screen.css" /><link rel="stylesheet" type="text/css" media="screen,projection" href="../../css/my-screen.css" /><link rel="stylesheet" type="text/css" media="browsers_that_ignore_the_media_type_attribute" href="../../css/browsersthatsuck.css" /><link rel="stylesheet" type="text/css" media="screen,print" href="/css/cuneify-ob.css" title="oldbabylonian" /><link rel="stylesheet" type="text/css" media="screen,print" href="/css/cuneify-na.css" title="neoassyrian" /><script type="text/javascript"><!--
	var sRoot = '/doc';
    // --></script><script type="text/javascript" src="/js/library.js"></script><meta http-equiv="pics-label" content='(pics-1.1 &#34;http://www.icra.org/ratingsv02.html&#34; l gen true for &#34;http://oracc.museum.upenn.edu../..&#34; r (nz 1 vz 1 lz 1 oz 1 cz 1))' /><link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" /><link rel="P3Pv1" href="../../w3c/p3p.xml" /><link rel="top" title="Documentation overview" href="../../" /><link rel="up" title="Building a Portal Website" href="../../portals/" /><link rel="prev" title="Setting up your ESP portal website" href="../../portals/espsetup/" /><meta name="generator" content="Oracc ESP" /><meta http-equiv="content-type" content="text/html; charset=UTF-8" /><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" /><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" /><meta name="DC.title" content="Checking, correcting, and rebuilding an ESP website" /><meta name="DC.title.alternative" content="Building an ESP site" /><meta name="DC.identifier" scheme="DCTERMS.URI" content="http://oracc.museum.upenn.edu../../portals/buildinganespsite/" /><meta name="DC.identifier" content="doc-oracc-museum-upenn-edu/page/esp-build" />
		<meta name="DC.publisher" content="Ocracc" />
		<meta name="DC.language" scheme="ISO 639-2/T" content="eng" />
		<meta name="DC.rights.copyright" content="Creative Commons SA 3.0 2013" />
		<meta name="DC.type" scheme="DCTERMS.DCMIType" content="Text" /> 	
		<meta name="DC.format" content="text/html" />
		
	
	<script type="text/javascript">


  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32878242-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body><div id="AccessLinks"><a id="top" name="top"></a><a href="../../accesskeys/index.html" accesskey="0">Access Keys</a> / <a href="../../sitemap/index.html" accesskey="3">Site Map</a><span id="TextSize"> / Text size: <span class="textsizelink" id="TextSizeSmaller"><a href="#" onclick="if ( window.changeTextSize ) changeTextSize ( -1 ); return false;" title="Smaller text" accesskey="8">&#160;-&#160;</a></span><span class="textsizelink" id="TextSizeLarger"><a href="#" onclick="if ( window.changeTextSize ) changeTextSize ( 1 ); return false;" title="Larger text" accesskey="9">&#160;+&#160;</a></span></span></div><div id="ReferenceLinks"><a href="../../privacy/index.html">Privacy</a> / <a href="../../webstandards/index.html">Web Standards</a> / <a href="../../licensing/index.html" title="Licensing statement" accesskey="7">Licensing</a></div><div id="Header"><span id="HeadTitle"><a href="../../index.html" title="Documentation overview" accesskey="1">Oracc Documentation</a></span></div><div id="Menu"><div id="MenuCaption">Main menu</div><ul><li class="only"><a href="../../index.html" title="Documentation overview" accesskey="1" class="only">Documentation home</a></li><li class="closed"><a href="../../usingoracc/index.html" title="Using Oracc: browse, sort, search, and display" class="closed">Using Oracc</a></li><li class="closed"><a href="../../editinginatf/index.html" title="Working with ATF to edit texts" accesskey="6" class="closed">Editing in ATF</a></li><li class="closed"><a href="../../usingemacs/index.html" title="Using Emacs for Oracc work" class="closed">Using Emacs</a></li><li class="closed"><a href="../../languages/index.html" title="Languages in Oracc" class="closed">Languages</a></li><li class="closed"><a href="../../lemmatising/index.html" title="Lemmatising ATF Files" class="closed">Lemmatising</a></li><li class="closed"><a href="../../convertingatf/index.html" title="Converting ATF to and from other formats" class="closed">Converting ATF</a></li><li class="open"><a href="../../portals/index.html" title="Building a Portal Website" class="open">Portals</a><ul><li class="only"><a href="../../portals/buildingportals/index.html" title="Choosing and Building Portal Websites" class="only">Building portals</a></li><li class="only"><a href="../../portals/projecturls/index.html" title="Referring to Oracc project URLs" class="only">Project URLs</a></li><li class="only"><a href="../../portals/installingesp/index.html" title="Installing the ESP templates and schema" class="only">Installing ESP</a></li><li class="only"><a href="../../portals/pagestructure/index.html" title="Understanding ESP page structure" class="only">Page structure</a></li><li class="only"><a href="../../portals/creatingcontent/index.html" title="Creating Textual Content in ESP XML Files" class="only">Creating content</a></li><li class="only"><a href="../../portals/styleguide/index.html" title="ESP Style Guide" class="only">Style Guide</a></li><li class="only"><a href="../../portals/espelements/index.html" title="ESP System Elements" class="only">ESP elements</a></li><li class="only"><a href="../../portals/links/index.html" title="Creating Links in ESP Pages" class="only">Links</a></li><li class="only"><a href="../../portals/glossaries/index.html" title="Creating Glossaries, Lists of Technical Terms and Indices in ESP Pages" class="only">Glossaries</a></li><li class="only"><a href="../../portals/referencing/index.html" title="Creating References and Bibliography in ESP Pages" class="only">Referencing</a></li><li class="only"><a href="../../portals/images/index.html" title="Images and image maps in ESP" class="only">Images</a></li><li class="only"><a href="../../portals/downloads/index.html" title="Downloads in ESP" class="only">Downloads</a></li><li class="only"><a href="../../portals/overviewofesp/index.html" title="Overview of ESP directory structure" class="only">Overview of ESP</a></li><li class="only"><a href="../../portals/espsetup/index.html" title="Setting up your ESP portal website" class="only">ESP setup</a></li><li class="only"><div id="SelfInMenu" class="only">Building an ESP site</div></li></ul></li><li class="closed"><a href="../../managingprojects/index.html" title="Oracc Manager Documentation" class="closed">Managing projects</a></li><li class="only"><a href="http://oracc.museum.upenn.edu/" class="only">Oracc home</a></li></ul></div><div id="Content"><div id="Breadcrumb"><a href="../../index.html" title="Documentation overview" accesskey="1">Documentation home</a> &#187; <a href="../../portals/index.html" title="Building a Portal Website">Portals</a> &#187; Building an ESP site</div><h1>Checking, correcting, and rebuilding an ESP website</h1>

<p class="firstpara">This page explains how to (re)build your ESP website, how to correct errors that emerge during the rebuild, and how to avoid them in the first place.</p>



<p>Errors in the structure and content of your XML may be picked up by your text editor, and will certainly be reported by Oracc when you come to rebuild your site. They will cause the generation of the associated page, or even of the whole site, to fail. The cause of such problems should usually be obvious from the error message.</p>

<a id="h_checkingasyouedit" name="h_checkingasyouedit"></a><h2>Checking as you edit</h2>

<p>To save yourself inordinate amounts of time in checking and correcting, you should edit your XML files in Emacs, <a href="../../portals/installingesp/index.html" title="Installing the ESP templates and schema">using the ESP templates and schemas</a>. As you work, the mode line in Emacs will tell you whether your file is valid or not, by saying <code>(nXML valid)</code> or <code>(nXML invalid)</code>. Errors in your tagging will also be displayed in red in the main window.</p>

<p>To find and eliminate validation errors, move your cursor to the start of the buffer, then do <code class="cookbook">^C ^N</code>. The cursor will move to the next error, and an error message will appear in the mode line. Correct that error and do <code class="cookbook">^C ^N</code> again until the mode line reads <code>(nXML valid)</code>.</p>

<a id="h_rebuilding" name="h_rebuilding"></a><h2>Rebuilding</h2>
<p>When you have finished creating and editing XML pages and embedded content for your ESP website, make sure that all the files are in the correct directories on Oracc (see the <a href="../../portals/overviewofesp/index.html" title="Overview of ESP directory structure">ESP overview</a> page) and that <a href="../../portals/espsetup/index.html#Site style" title="Jump to  in Setting up your ESP portal website"><code>appearance.xml</code></a>, <a href="../../portals/espsetup/index.html#Site parameters" title="Jump to  in Setting up your ESP portal website"><code>parameters.xml</code></a> and <a href="../../portals/espsetup/index.html#Site structure" title="Jump to  in Setting up your ESP portal website"><code>structure.xml</code></a> have all been correctly edited.</p>

<p>Log in to Oracc with PuTTy or Terminal and run <a href="../../managingprojects/theoracccommand/index.html" title="The Oracc command">the Oracc command</a> <code class="cookbook">oracc esp</code>. If there are no errors in your ESP code, you will see output like this:</p>

<pre class="listing">
Removing existing development folder
Copying ESP default site content
cp: omitting directory `00web/.'
cp: omitting directory `00web/..'
Copying project site content
cp: omitting directory `00web/.'
cp: omitting directory `00web/..'
Getting image info
Getting page last-modified times

Retrieving image dimensions

Creating CSS files (for these media: screen, print, handheld, browsersthatsuck)

Phase 1: Resolve and filter source tree

Phase 2: Enhance and standardise source tree

Phase 3: Process high-level mark-up (= mark-up giving rise to other mark-up
needing processing), and add structural page components to body

Phase 4: Process low-level mark-up (= mark-up giving rise to other mark-up 
to be output as is), and add structural page components to head

Phase 5: Split into pages (any warning refers to the file named *before* 
the warning)
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/abouttheproject/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/listofdeities/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/listofdeities/aya/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/listofdeities/ninisinna/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/bibliography/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/accesskeys/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/sitemap/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/privacy/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/webstandards/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/creditscopyright/index.html
   Page: file:/usr/local/oracc/amgg/00web/esp/httproot_dev/404/index.html

Validating pages as XHTML (only non-validating pages reported)

Setting X bits (chmod g+x) to enable SSIs, used for 'accessed' dates
</pre>

<p>If there are errors, error messages will be interspersed with this listing (<a href="#Structural errors" title="Jump to  on this page" onclick="if ( window.highlight ) window.setTimeout ( 'highlight ()', 100 )" onkeypress="if ( window.highlight ) window.setTimeout ( 'highlight ()', 100 )">see below</a>) and the rebuild may fail. Correct all reported errors and run <code class="cookbook">oracc esp</code> again. When there are no errors left, you can make the new site go live on the Oracc website by running <code class="cookbook">oracc esp live</code> and answering <code>yes</code> to the resultant prompt.</p>

<a id="h_structuralerrors" name="h_structuralerrors"></a><h2>Structural errors</h2>
<p>The <code>oracc esp</code> command will report any errors made during the rebuilding of the site. Although errors are reported for the html files being generated, it is the associated xml files in <code>00web/esp/site-content/pages/</code> that must be fixed.</p>

<p>Usually the error messages will indicate clearly what has gone wrong. However, sometimes it takes experience (and/or some trial and error!) to decode them.  If you are unsure, try pasting the error message into Google and you may come up with some useful answers.  Contact the Oracc team if you need additional help.  Remember to make a note of anything that you may wish to refer to in future.</p>

<p>NB. The system does not do extensive error checking for consistency. You will get a warning message if you try to create a <code>&#60;esp:link&#62;</code> to a non-existent page, or if you use <code>&#60;esp:glossary&#62;</code> on a term that is not defined on the glossary page, but some other errors may not be reported.</p>

<p>After correcting any sources of error (e.g. mis-named files, badly formed XML, filenames with spaces in, etc.) and run the  <code>oracc esp</code> again.  When no errors are returned, all pages of the site have been generated correctly.</p>

<a id="h_someofthemorecrypticerrorsexplained" name="h_someofthemorecrypticerrorsexplained"></a><h2>Some of the more cryptic errors explained</h2>

<a id="h_errorbeforephase1hasstarted" name="h_errorbeforephase1hasstarted"></a><h3>Error before Phase 1 has started</h3>
<dl>
<dt><code>Exception in thread "main" java.lang.NullPointerException at ImageInfo.main(ImageInfo.java:1025)</code></dt>
<dd>This error is returned by the script that automatically detects the size of images. It means that the size of one or more images couldn't be detected properly, and that image may not display properly on the website.  The most likely cause of this error is image files that contain a space in their filename (e.g. <code class="example">my great image.jpg</code>).  (Spaces are not permitted in image filenames in order for the script to work properly.) To solve the error: go through the images folder and remove any spaces from image filenames (i.e. change to <code class="example">mygreatimage.jpg</code>).  The error may also occur if files other than image files are placed in the images folder.</dd>
</dl>

<a id="h_validationerrors" name="h_validationerrors"></a><h3>Validation errors</h3>
<dl>
<dt><code>Error at line:x, column:x of file:///  tag name "div" is not allowed.</code></dt>
<dd>You have use an invalid element (in this example <code>&#60;div&#62;</code>). You will need to remove or replace it.</dd>

<dt>Error returned when &#60;esp:image&#62; tag refers to an image without a file extension</dt>
<dd>For instance, <code class="example">&#60;esp:image file="picture1" ...&#62;</code> instead of the correct version: <code class="example">&#60;esp:image file="picture1.jpg" ...&#62;</code>.</dd>
</dl>

<a id="h_goodpracticeforavoidingerrors" name="h_goodpracticeforavoidingerrors"></a><h2>Good practice for avoiding errors</h2>
<a id="h_usingandnestingelements" name="h_usingandnestingelements"></a><h3>Using and nesting elements</h3>
<p>Most XHTML and system elements can be used inside (nested in) most other XHTML and system elements. However, there are exceptions. Because of the syntax of XML/XHTML, certain system elements will not work in certain places. If you use an element in a place where it doesn't work, it will be filtered out, and a warning will be generated at the final stage of processing.</p>

<p>Because the site claims to be valid XHTML, it must respect the XHTML specification. This places certain prohibitions on element nesting. </p>

<p>Broadly, you should avoid the following: </p>

<ul>
<li>Placing a block-level XHTML element, such as <code>&#60;p&#62;</code> or <code>&#60;blockquote&#62;</code> (or a system element which creates one), inside an inline XHTML element, such as <code>&#60;a&#62;</code> or <code>&#60;b&#62;</code> (or a system element which creates one).  NB.  This means that when using <code>&#60;blockquote&#62;</code> you should nest the tags <code>&#60;blockquote&#62;&#60;p&#62;text here&#60;/p&#62;&#60;/blockquote&#62;</code> rather than the other way around.</li>

<li>Placing a system element which creates an XHTML &#60;a&#62; element inside any other element that does so. This means that none of the elements <code>&#60;esp:bookmark&#62;</code>, <code>&#60;esp:link&#62;</code>, <code>&#60;esp:glossary&#62;</code>, <code>&#60;esp:reference&#62;</code>, and <code>&#60;esp:index&#62;</code> may occur inside any of those same elements.</li>
</ul>
<p>All of these errors are easily avoided if you edit your XML files in Emacs <a href="../../portals/installingesp/index.html" title="Installing the ESP templates and schema">using the ESP schemas and templates</a>.</p>

<p>Note that using the <code>&#60;embed&#62;</code> element will unavoidably result in invalid XHTML, but that this is the only reasonable method for including a Flash movie that will play in all browsers.</p>

<a id="h_namesandnaming" name="h_namesandnaming"></a><h3>Names and naming</h3>
<p>To prevent errors, always use lowercase names for your files and when creating short page ids etc.  Do not use spaces in file names or ids; instead separate words with an underscore or a hyphen.</p>

<p>The text in the navigation bar is given by &#60;esp:name&#62; - see the documentation on <a href="../../portals/espsetup/index.html#Page structure" title="Jump to  in Setting up your ESP portal website">page structure</a>.  Keep <code>&#60;esp:name&#62;</code> entries short as they will be used in the navigation bar.</p>

<p>The page title is given by &#60;esp:title&#62;  - see the documentation on <a href="../../portals/espsetup/index.html#Page structure" title="Jump to  in Setting up your ESP portal website">page structure</a>.  This text can be much longer than that given in &#60;esp:name&#62;.</p>

<p>Links to internal pages should use the short page id defined in the &#60;esp:page&#62; tag in <code>structure.xml</code> - see the documentation on <a href="../../portals/espsetup/index.html#Internal links" title="Jump to  in Setting up your ESP portal website">internal links</a>.</p>

<p>Each page is referenced in the <a href="../../portals/espsetup/index.html#Site structure" title="Jump to  in Setting up your ESP portal website">site structure</a>, i.e., in <code>structure.xml</code>, using its file name (e.g., <code>assurbanipal.xml</code>).  Using the wrong name, such as the page id, is a common reason for stage 1 errors when the code is processed.  Keep file names and folder names short and memorable as they are used to create the site's URL structure.</p>

<a id="h_testingthewebsite" name="h_testingthewebsite"></a><h2>Testing the website</h2>
<p>You should also thoroughly test every HTML page on the website whenever it is changed. Ensure that all parts behave as expected--for example, that all links are present and working. If there are problems, you will need to correct the corresponding XML files and rebuild the site once again.</p>





29 Jun 2013
<span class="obfuscatedEmailAddress">osc at oracc dot org</span>


<div id="Authors"><p>Ruth Horry &#38; Eleanor Robson</p></div><div id="CiteAs"><p>Ruth Horry &#38; Eleanor Robson, 'Checking, correcting, and rebuilding an ESP website', <i>Oracc Documentation</i>, Oracc,  2013 [http://oracc.museum.upenn.edu/doc/portals/buildinganespsite/<!--#config timefmt=", accessed %d %B %Y" --><!--#echo var="DATE_LOCAL" -->]</p></div><div id="EndContentSpace">&#160;</div></div><div id="BackToTop"><a href="#top" onclick="if ( window.highlight ) window.setTimeout ( 'highlight ()', 100 )" onkeypress="if ( window.highlight ) window.setTimeout ( 'highlight ()', 100 )">Back to top ^^</a></div><div id="FooterWhole">&#160;</div><div id="FooterRight"></div><div id="FooterLeft">Released under a <a href="http://http://creativecommons.org/licenses/by-sa/3.0/" class="external" target="_blank" title="Link opens in new window">Creative Commons Attribution Share-Alike license 3.0</a>, 2013</div><div id="URL">http://oracc.museum.upenn.edu/doc/portals/buildinganespsite/</div></body></html>